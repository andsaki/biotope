---
description: 新機能の実装セッションを開始
argument-hint: [feature-name]
---

# ⚠️ 重要: 以下の手順を必ず順守してください

新機能「$1」の実装セッションを開始します。

## 🚫 絶対にやってはいけないこと

**コード変更禁止**: plan.md の承認を得る前に、絶対にコードを変更しないでください。

---

## 📋 必須手順（この順序で実行）

### ステップ1: セッション用ディレクトリとファイルの作成

**必ず以下を実行**:

```bash
# 最新の連番を確認
ls -d tmp/*/ | sort -V | tail -1

# 新しいディレクトリ作成
mkdir -p tmp/{連番}_$1/

# テンプレートファイルを作成
touch tmp/{連番}_$1/plan.md
touch tmp/{連番}_$1/prompt.md
```

### ステップ2: plan.md を作成

**plan.md に必ず含める内容**:

```markdown
# 実装計画: $1

## 目的
[この機能を追加する理由]

## 実装スコープ
### 1. 作成するファイル
- ファイルパスと役割をリスト

### 2. 変更するファイル
- 既存ファイルと変更箇所

## 実装手順（ステップバイステップ）
1.
2.
3.

## 技術的詳細
- 使用するパターン
- 既存コードの踏襲

## テスト計画
- [ ] npm run build
- [ ] 動作確認
- [ ] パフォーマンステスト

## 完了条件
- [ ]
- [ ]

## 実装時間見積もり
合計: XX分
```

### ステップ3: prompt.md を作成

**prompt.md に記録する内容**:

```markdown
# 実装セッション: $1

## セッション情報
- 開始日時: YYYY-MM-DD
- タスク: [概要]
- 参照: plan.md

## 進捗状況
### ✅ 完了
- [x] plan.md 作成

### 🔄 進行中
- [ ] ユーザー承認待ち

### ⏳ 未着手
- [ ] 実装

## ユーザーからの指示
[記録]
```

### ステップ4: ユーザーに plan.md を提示

**必須のアクション**:

1. plan.md の内容を全文表示
2. 以下のメッセージでユーザーに確認:

```
以下の実装計画でよろしいでしょうか？

[plan.md の内容]

---

✅ 承認いただければ実装を開始します
❌ 修正点があればお知らせください

⚠️ 承認前にコード変更は行いません
```

### ステップ5: ユーザーの承認を待つ

**🛑 ここで必ず停止**

- ユーザーから「OK」「承認」「進めて」などの返答があるまで待機
- 承認がない場合は絶対にコード変更しない

### ステップ6: 承認後に実装開始

**承認を得たら**:

1. prompt.md を更新（「ユーザー承認取得」を記録）
2. plan.md の手順に従って実装
3. 各ステップ完了時に prompt.md を更新
4. テスト実施
5. 完了を prompt.md に記録

---

## ✅ チェックリスト

実装開始前に以下を確認:

- [ ] `tmp/{連番}_$1/` ディレクトリを作成した
- [ ] `plan.md` を作成し、すべてのセクションを記入した
- [ ] `prompt.md` を作成し、セッション情報を記録した
- [ ] plan.md の内容をユーザーに提示した
- [ ] ユーザーから承認を得た ← **これがないとコード変更禁止**

---

## 🔄 作業中の継続的な更新

- 各タスク完了時: prompt.md の「✅ 完了」を更新
- 問題発生時: prompt.md の「課題・メモ」に記録
- ユーザー指示時: prompt.md の「ユーザーからの指示」に記録

---

## 💡 このプロセスの重要性

1. **手戻り防止**: 事前計画でミスを防ぐ
2. **意思疎通**: ユーザーと認識を合わせる
3. **記録保存**: 後から見返せる
4. **品質向上**: 計画的な実装で品質が上がる

**絶対に守ってください**: 承認前のコード変更は厳禁です。
